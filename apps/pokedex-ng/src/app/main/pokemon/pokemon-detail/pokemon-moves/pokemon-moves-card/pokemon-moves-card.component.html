<ng-container *ngVar="expandableMoves$ | async as moves">
  <mdb-card class="max-detail-size w-100 pb-2" *ngIf="moves?.length > 0">
    <div class="container-fluid cursor-pointer border-bottom">
      <div class="row m-2 align-items-center" title="{{ 'UI.MOVE.TITLE_' + cardTitle + '_TITLE' | translate }}">
        <a mdbBtn floating="true">
          <mdb-icon fas icon="info" size="1x"></mdb-icon>
        </a>
        <div class="overflow-hidden text-nowrap pl-2">
          {{ "UI.MOVE.TITLE_" + cardTitle | translate }}
        </div>
      </div>
    </div>
    <mdb-card-body class="py-0 px-2 px-sm-4">
      <table class="table table-sm mb-0">
        <thead>
          <tr>
            <th scope="col">
              <span *ngIf="showLevels">{{ "UI.MOVE.LEVEL" | translate }}</span>
            </th>
            <th scope="col">{{ "UI.MOVE.MOVE" | translate }}</th>
            <th scope="col">{{ "UI.MOVE.TYPE" | translate }}</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let expandableMove of moves">
            <tr>
              <td class="align-middle">
                <span *ngIf="showLevels">{{ expandableMove.resource.version_group_detail?.level_learned_at }}</span>
              </td>
              <td class="align-middle w-75">
                {{ "MOVE." + expandableMove.resource.move.name + ".NAME" | translate }}
              </td>
              <td>
                <div class="text-center text-white pt-1">
                  <span
                    class="p-1 rounded-lg"
                    [ngStyle]="{ 'background-color': expandableMove.resource.type | pokeTypeColor }"
                    *ngVar="'TYPE.' + expandableMove.resource.type | translate | uppercase as typeName"
                  >
                    {{ typeName }}
                  </span>
                </div>
              </td>
              <td class="text-right align-middle p-0">
                <a
                  class="btn btn-primary p-1 px-2"
                  role="button"
                  aria-expanded="false"
                  aria-controls=""
                  (click)="expandableMove.expanded = !expandableMove.expanded"
                >
                  <mdb-icon
                    fas
                    icon="chevron-right"
                    size="1x"
                    [ngClass]="{ expanded: expandableMove.expanded }"
                  ></mdb-icon>
                </a>
              </td>
            </tr>
            <tr *ngIf="expandableMove.expanded">
              <td colspan="4" [ngClass]="{ 'border-top-0': expandableMove.expanded }" class="px-0 pb-3">
                <app-pokemon-move [moveId]="expandableMove.resource.move.name"></app-pokemon-move>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </mdb-card-body>
  </mdb-card>
</ng-container>
