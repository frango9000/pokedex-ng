"use strict";(self.webpackChunkpokedex_ng=self.webpackChunkpokedex_ng||[]).push([[331],{1331:(j,f,i)=>{i.r(f),i.d(f,{MachineModule:()=>c});var d=i(6895),Z=i(5380),v=i(2602),x=i(7296),b=i(4184),g=i(4004),T=i(4474),C=i(9716),M=i(45),e=i(4650),U=i(529);class r extends C.bQ{constructor(t,n,s){super("machine",t),this.http=t,this.filterService=n,this.versionGroupService=s}getAllFiltered(){return this.getAll().pipe((0,g.U)(t=>this.versionGroupService.filterByVersionGroup(t)),(0,g.U)(t=>this.filterService.filterByChildType(t,"move")))}}r.\u0275fac=function(t){return new(t||r)(e.LFG(U.eN),e.LFG(T.i),e.LFG(M.H))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"});var F=i(8996),I=i(1150),L=i(6719),O=i(6370),G=i(5707),$=i(493),u=i(9450),N=i(727),S=i(1135),Q=i(6451),J=i(8505),D=i(3900),y=i(5684),B=i(8684),Y=i(3805),z=i(9168),P=i(9919),E=i(2470);class l{}function H(o,t){1&o&&e._UZ(0,"pokedex-ng-filter-toolbar",6),2&o&&e.Q6J("showTypesFilter",!0)}function R(o,t){if(1&o&&(e.TgZ(0,"tr")(1,"td",14),e._UZ(2,"pokedex-ng-machine-detail",15),e.qZA()()),2&o){const n=e.oxw().$implicit;e.xp6(2),e.Q6J("moveId",n.move.name)("itemId",n.item.name)}}function V(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"tr",7),e.NdJ("click",function(){const m=e.CHM(n).$implicit,A=e.oxw();return e.KtG(A.expandedMachine=A.expandedMachine===m.id.toString()?"":m.id.toString())}),e.TgZ(2,"td",8),e._uU(3),e.qZA(),e.TgZ(4,"td",9),e._UZ(5,"img",10),e.qZA(),e.TgZ(6,"td",8),e._uU(7),e.ALo(8,"transloco"),e.qZA(),e.TgZ(9,"td",8),e._uU(10),e.qZA(),e.TgZ(11,"td",8),e._uU(12),e.ALo(13,"transloco"),e.qZA(),e.TgZ(14,"td",8)(15,"div",11),e._UZ(16,"pokedex-ng-type-pill",12),e.qZA()(),e.TgZ(17,"td",8),e._uU(18),e.qZA(),e.TgZ(19,"td",8),e._uU(20),e.qZA(),e.TgZ(21,"td",8),e._uU(22),e.qZA()(),e.YNc(23,R,3,2,"tr",13),e.BQk()}if(2&o){const n=t.$implicit,s=e.oxw();e.xp6(3),e.Oqu(n.id),e.xp6(2),e.MGl("src","https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/",n.item.sprite,"",e.LSH),e.s9C("alt",n.item.sprite),e.xp6(2),e.Oqu(e.lcZ(8,14,"ITEM."+n.item.name+".NAME")),e.xp6(3),e.Oqu(n.item.cost),e.xp6(2),e.Oqu(e.lcZ(13,16,"MOVE."+n.move.name+".NAME")),e.xp6(4),e.Q6J("type",n.move.type)("showDefending",!1)("clickable",!1)("size",12),e.xp6(2),e.Oqu(n.move.power),e.xp6(2),e.Oqu(n.move.pp),e.xp6(2),e.Oqu(n.move.accuracy),e.xp6(1),e.Q6J("ngIf",s.expandedMachine===n.id.toString())}}l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["pokedex-ng-machine-detail"]],inputs:{moveId:"moveId",itemId:"itemId"},decls:8,vars:2,consts:[[1,"m-2"],[3,"moveId"],[3,"itemId"]],template:function(t,n){1&t&&(e.TgZ(0,"mdb-card",0)(1,"mdb-card-header"),e._uU(2,"Move"),e.qZA(),e._UZ(3,"pokedex-ng-move-detail",1),e.qZA(),e.TgZ(4,"mdb-card",0)(5,"mdb-card-header"),e._uU(6,"Item"),e.qZA(),e._UZ(7,"pokedex-ng-item-detail",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("moveId",n.moveId),e.xp6(4),e.Q6J("itemId",n.itemId))},dependencies:[v.n3,v.W6,P.Q,E.g]});class h{constructor(t,n,s,p,m){this.machineService=t,this.filterService=n,this.appNavbarService=s,this.route=p,this.versionGroupService=m,this.subscriptions=new N.w0,this._machines$=new S.X([]),this._filterChange$=new S.X(!0),this.expandedMachine="",this.offset=0,this.increment=72}ngOnInit(){this.route.data.subscribe(t=>{this.expandedMachine=t?.machine?.id+""||""}),this.subscriptions.add(this._updateListSubscription()),this.subscriptions.add(this._filterChangesSubscription()),this.appNavbarService.showFiltersButton(),this.appNavbarService.showVersionGroupPicker()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.appNavbarService.hideAll(),this.filterService.clearAllFilters()}getMachines$(){return this._machines$.asObservable()}renderMore(){this._filterChange$.next(!1)}_updateListSubscription(){return this._filterChange$.pipe((0,J.b)(t=>t?this.offset=this.increment:this.offset+=this.increment),(0,D.w)(()=>this.machineService.getAllFiltered()),(0,g.U)(t=>t.slice(0,this.offset))).subscribe(t=>this._machines$.next(t))}_filterChangesSubscription(){return(0,Q.T)(this.filterService.getTypesFilter$().pipe((0,y.T)(1)),this.versionGroupService.getActiveVersionGroup$().pipe((0,y.T)(1))).subscribe(()=>{this._filterChange$.next(!0)})}}h.\u0275fac=function(t){return new(t||h)(e.Y36(r),e.Y36(T.i),e.Y36(B.t),e.Y36(u.gz),e.Y36(M.H))},h.\u0275cmp=e.Xpm({type:h,selectors:[["pokedex-ng-machine-list"]],decls:28,vars:8,consts:[[1,"machine-table-container","w-100","d-flex","flex-column","align-items-center"],["class","machine-table",3,"showTypesFilter",4,"ngIf"],["infiniteScroll","",1,"table-responsive","machine-table",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["aria-describedby","Table of Machine Details","aria-hidden","true",1,"table","table-hover","table-sm"],["scope","col"],[4,"ngFor","ngForOf"],[1,"machine-table",3,"showTypesFilter"],[3,"click"],[1,"p-0","align-middle"],[1,"align-middle","py-0"],["height","40px",1,"py-0",3,"src","alt"],[1,"p-1"],[3,"type","showDefending","clickable","size"],[4,"ngIf"],["colspan","9"],[3,"moveId","itemId"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,H,1,1,"pokedex-ng-filter-toolbar",1),e.ALo(2,"async"),e.TgZ(3,"div",2),e.NdJ("scrolled",function(){return n.renderMore()}),e.TgZ(4,"table",3)(5,"thead")(6,"tr")(7,"th",4),e._uU(8,"Id"),e.qZA(),e.TgZ(9,"th",4),e._uU(10,"Image"),e.qZA(),e.TgZ(11,"th",4),e._uU(12,"Name"),e.qZA(),e.TgZ(13,"th",4),e._uU(14,"Cost"),e.qZA(),e.TgZ(15,"th",4),e._uU(16,"Move"),e.qZA(),e.TgZ(17,"th",4),e._uU(18,"Type"),e.qZA(),e.TgZ(19,"th",4),e._uU(20,"Power"),e.qZA(),e.TgZ(21,"th",4),e._uU(22,"PP"),e.qZA(),e.TgZ(23,"th",4),e._uU(24,"Accuracy"),e.qZA()()(),e.TgZ(25,"tbody"),e.YNc(26,V,24,18,"ng-container",5),e.ALo(27,"async"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,n.appNavbarService.getShowFilters$())),e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",150),e.xp6(23),e.Q6J("ngForOf",e.lcZ(27,6,n.getMachines$())))},dependencies:[d.sg,d.O5,x.Ry,Y.Q,z.D,l,d.Ov,Z.Ot],styles:[".machine-table[_ngcontent-%COMP%]{max-width:1000px}"]});const X=[{path:"",component:h}];class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(X),u.Bz]});class c{constructor(t,n,s,p){this.itemService=t,this.machineService=n,this.moveService=s,this.typeService=p}}c.\u0275fac=function(t){return new(t||c)(e.LFG(b.e),e.LFG(r),e.LFG(F.q),e.LFG(I.S))},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[d.ez,a,x.Rq,L.m,v.yi,G.l,O.n,Z.y4,$.Q]})}}]);